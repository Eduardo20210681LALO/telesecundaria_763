name: CI/CD Workflow Telesecundaria763

on: [push]

jobs:
  selenium-tests:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Start local server
        run: npm run dev &
        env:
          CI: true

      - name: Wait for server to start
        run: sleep 15  # Incrementa el tiempo si el servidor tarda

      - name: Selenium IDE Website Tester
        uses: Dylan700/selenium-ide-action@v1.1.3
        with:
          url: "http://localhost:5173/EstadisticasGrupalDocent"  # URL de la ruta específica
          test: "github/workflows/prueba.side"  # Asegúrate de que este archivo exista y esté configurado correctamente

      - name: Selenium Test Report
        if: always()  # Ejecuta siempre este paso
        run: |
          mkdir -p ./reports
          mv ./path/to/generated/report.xml ./reports/test-report.xml

      - name: Display Test Report
        if: always()
        uses: actions/upload-artifact@v3
        with:
          name: Selenium Test Report
          path: ./reports/test-report.xml
